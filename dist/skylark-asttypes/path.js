/**
 * skylark-asttypes - A version of asttypes that ported to running on skylarkjs.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./types"],function(e){"use strict";var g=Object.prototype.hasOwnProperty;return function(t){var t=t.use(e),c=t.builtInTypes.array,f=t.builtInTypes.number;function v(t,e,r){if(!(this instanceof v))throw new Error("Path constructor cannot be invoked without 'new'");if(e){if(!(e instanceof v))throw new Error("")}else r=e=null;this.value=t,this.parentPath=e,this.name=r,this.__childCache=null}t=v.prototype;function p(t){return t.__childCache||(t.__childCache=Object.create(null))}function w(){}function m(r,t,e,n){if(c.assert(r.value),0===t)return w;var a=r.value.length;if(a<1)return w;for(var h=arguments.length,i=(n=2===h?(e=0,a):3===h?(e=Math.max(e,0),a):(e=Math.max(e,0),Math.min(n,a)),f.assert(e),f.assert(n),Object.create(null)),l=p(r),s=e;s<n;++s)if(g.call(r.value,s)){var u=r.get(s);if(u.name!==s)throw new Error("");var o=s+t;u.name=o,i[o]=u,delete l[s]}return delete l.length,function(){for(var t in i){var e=i[t];if(e.name!==+t)throw new Error("");l[t]=e,r.value[t]=e.value}}}return t.getValueProperty=function(t){return this.value[t]},t.get=function(...t){for(var e,r,n,a,h,i=this,l=t.length,s=0;s<l;++s)e=i,r=t[s],h=a=n=void 0,n=p(e),a=e.getValueProperty(r),h=n[r],i=h=g.call(n,r)&&h.value===a?h:n[r]=new e.constructor(a,e,r);return i},t.each=function(t,e){for(var r=[],n=this.value.length,a=0,a=0;a<n;++a)g.call(this.value,a)&&(r[a]=this.get(a));for(e=e||this,a=0;a<n;++a)g.call(r,a)&&t.call(e,r[a])},t.map=function(e,t){var r=[];return this.each(function(t){r.push(e.call(this,t))},t),r},t.filter=function(e,t){var r=[];return this.each(function(t){e.call(this,t)&&r.push(t)},t),r},t.shift=function(){var t=m(this,-1),e=this.value.shift();return t(),e},t.unshift=function(...t){var e=m(this,t.length),t=this.value.unshift.apply(this.value,t);return e(),t},t.push=function(...t){return c.assert(this.value),delete p(this).length,this.value.push.apply(this.value,t)},t.pop=function(){c.assert(this.value);var t=p(this);return delete t[this.value.length-1],delete t.length,this.value.pop()},t.insertAt=function(t){var e=arguments.length,r=m(this,e-1,t);if(!(r===w&&e<=1)){t=Math.max(t,0);for(var n=1;n<e;++n)this.value[t+n-1]=arguments[n];r()}return this},t.insertBefore=function(...t){for(var e=this.parentPath,r=t.length,n=[this.name],a=0;a<r;++a)n.push(t[a]);return e.insertAt.apply(e,n)},t.insertAfter=function(...t){for(var e=this.parentPath,r=t.length,n=[this.name+1],a=0;a<r;++a)n.push(t[a]);return e.insertAt.apply(e,n)},t.replace=function(t){var e=[],r=this.parentPath.value,n=p(this.parentPath),a=arguments.length,h=this;if(!(h instanceof v))throw new Error("");if(l=h.parentPath){var i=l.value,l=p(l);if(i[h.name]===h.value?l[h.name]=h:c.check(i)?0<=(s=i.indexOf(h.value))&&(l[h.name=s]=h):(i[h.name]=h.value,l[h.name]=h),i[h.name]!==h.value)throw new Error("");if(h.parentPath.get(h.name)!==h)throw new Error("")}if(c.check(r)){for(var s=r.length,l=m(this.parentPath,a-1,this.name+1),u=[this.name,1],o=0;o<a;++o)u.push(arguments[o]);if(r.splice.apply(r,u)[0]!==this.value)throw new Error("");if(r.length!==s-1+a)throw new Error("");if(l(),0===a)delete this.value,delete n[this.name],this.__childCache=null;else{if(r[this.name]!==t)throw new Error("");for(this.value!==t&&(this.value=t,this.__childCache=null),o=0;o<a;++o)e.push(this.parentPath.get(this.name+o));if(e[0]!==this)throw new Error("")}}else if(1===a)this.value!==t&&(this.__childCache=null),this.value=r[this.name]=t,e.push(this);else{if(0!==a)throw new Error("Could not replace path");delete r[this.name],delete this.value,this.__childCache=null}return e},v}});
//# sourceMappingURL=sourcemaps/path.js.map
